name = "core-ai-proxy"
main = "src/index.ts"
compatibility_date = "2024-11-01"
compatibility_flags = ["nodejs_compat"]

# Asset binding for the frontend
[assets]
directory = "./public"
binding = "ASSETS"

# D1 database
[[d1_databases]]
binding = "DB"
database_name = "agents_db"
database_id = "placeholder-db-id"
preview_database_id = "placeholder-preview-db-id"

# WebSocket Durable Object
[[durable_objects.bindings]]
name = "WEBSOCKET_DO"
class_name = "WebSocketDO"

[[migrations]]
tag = "v1"
new_classes = ["WebSocketDO"]

# Scheduled trigger for running health tests
[triggers]
crons = ["*/15 * * * *"]

# Environment variables
[vars]
# SECURITY: API keys should be stored as secrets in production
# Set them using: wrangler secret put OPENAI_API_KEY
# Set them using: wrangler secret put ANTHROPIC_API_KEY
# Set them using: wrangler secret put GOOGLE_API_KEY
# For development, use .dev.vars file or --var flags

# Placeholder values for development (replace with real keys or use secrets)

# Base URL for health checks (update with your actual worker URL)
BASE_URL = "https://core-ai-proxy.workers.dev"

# URLs for proxied MCP tools
CLOUDFLARE_DOCS_MCP_URL = "https://mcp.cloudflare.com/tools/cloudflare-docs"

# AI Binding for Workers AI
[ai]
binding = "AI"

# KV namespace for settings storage
[[kv_namespaces]]
binding = "SETTINGS_KV"
id = "5f9f27bac1504404af87bd131621ac44"
preview_id = "d94b2e8c4a6549938b01cae575ad1962"
